<!DOCTYPE html>
<html lang="en">
<head>

  <title>Cricket</title>
  <link rel="stylesheet" href="cricket.css">
</head>
<body>
  <h1>Bat Ball Stump  Game</h1>




  <button  class="choiceButton" onclick="
   let computerChoice = generateComputerChoice();
   let resultMsg = getResult('Bat', computerChoice);
   showResult('Bat',computerChoice,resultMsg);
  "><img src="image/bat.png" alt="bat image" class="choiceImage">
  </button>

   <button class="choiceButton"  onclick="
   computerChoice = generateComputerChoice();
   resultMsg= getResult('Ball', computerChoice);
  showResult('Ball',computerChoice,resultMsg);
  "><img src="image/ball.png" alt="ball image" class="choiceImage"></button>

  <button class="choiceButton"  onclick="
  computerChoice = generateComputerChoice();
  resultMsg= getResult('Stump', computerChoice);
  showResult('Stump',computerChoice,resultMsg); 
  "><img src="image/stump.png" alt="stump image" class="choiceImage"></button> 




<h3 id="userMove"></h3>
<h3 id="computerMove"></h3>
<h3 id="result"></h3>
<h3 id="score"></h3>
<button id="resetButton" onclick="localStorage.clear()
    resetScore();
"> Reset</button>

  <script>
    let scoreStr = localStorage.getItem('score');
    let score ;
    resetScore(scoreStr);
    function resetScore(scoreStr){
      score =  scoreStr ? JSON.parse(scoreStr) :
       {
          win: 0,
          lost: 0,
          tie : 0,
       };

score.displayScore = function(){
   return` Score: Won:${score.win} Lost:${score.lost} tie:${score.tie}`;
};
showResult();
    }

function generateComputerChoice(){
  //this will generate random numb er between 0 and 3
    let randomNumber = Math.random() * 3; 
      if( randomNumber > 0 && randomNumber <= 1){
        return 'Bat';
      } else if ( randomNumber > 1 && randomNumber <= 2){
        return'Ball';
      }else{
       return 'Stump';
      }

}

function getResult( userMove , computerMove){

if (userMove === 'Bat'){

   if ( computerMove === 'Ball'){
    score.win++;
    return 'User won';
   }else if ( computerMove === 'Bat'){
     score.tie++;
    return `it's a tie `;
   }else if ( computerMove === 'Stump'){
     score.lost++;
    return 'Computer won';
   }
  

}else if (userMove === 'Ball') {

if ( computerMove === 'Ball'){
    score.tie++;
    return  `it's a tie `;
   }else if ( computerMove === 'Bat'){
    score.lost++;
    return 'Computer won';
   }else if ( computerMove === 'Stump'){
    score.win++;
    return 'User won';
   }


}else{

 if ( computerMove === 'Ball'){
  score.lost++;
    return  'Computer won';
   }else if ( computerMove === 'Bat'){
    score.win++;
    return 'User won';
   }else if ( computerMove === 'Stump'){
    score.tie++;
    return `it's a tie `;
   }
}  
}
 function showResult( userMove, computerMove, result){
  localStorage.setItem('score', JSON.stringify(score));

  document.querySelector('#userMove').innerText = userMove  ? `You have chosen  ${userMove}`: '';


  document.querySelector('#computerMove').innerText = computerMove ?`Computer choice is  ${computerMove}` : '';


  document.querySelector('#result').innerText = result  || '' ;


  document.querySelector('#score').innerText = score.displayScore();

  alert(`You have chosen  ${userMove}. Computer choice is ${computerMove} and
  
  ${result} 
  
  ${score.displayScore()} `);
 }
  </script>
</body>
</html>